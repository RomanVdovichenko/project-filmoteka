!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequire723b;function c(e){return e.map((function(e){for(var t="",n=0;n<e.genres.length;n++)n<e.genres.length-1?t+=e.genres[n].name+", ":t+=e.genres[n].name;return'<li class="movie">\n          <div class="movie__box">\n            <img class="lazyload movie__img" id=\''.concat(e.id,'\'\n              src="./images/Rectangle.png"\n              data-src="https://image.tmdb.org/t/p/w500').concat(e.img,'"\n              alt="').concat(e.title,'"\n            />\n          </div>\n          <div class="movie__desc">\n            <h3 class="movie__title">').concat(e.title,'</h3>\n            <p class="movie__genre">').concat(t," | ").concat(e.date.slice(0,4),'\n            <span class="movie__vote">').concat(e.vote.toFixed(1),"</span></p>\n          </div>\n        </li>")})).join("")}null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){a[e]=t},t.parcelRequire723b=o);var r=o("bpxeT"),i=o("2TvXO");function l(e){for(var t="",n=0;n<e.genres.length;n++)n<e.genres.length-1?t+=e.genres[n].name+", ":t+=e.genres[n].name;return'\n    <img class="modal__img" src="https://image.tmdb.org/t/p/w500'.concat(e.poster_path,'" alt="').concat(e.title,'" />\n    <div class="modal__box">\n      <p class="modal__title">').concat(e.title,'</p>\n      <table class="modal__info">\n        <tbody>\n          <tr>\n            <td class="modal__item one">Vote / Votes</td>\n            <td class="votes one"><span class="vote">').concat(e.vote_average.toFixed(1),"</span> / ").concat(e.vote_count,'</td>\n          </tr>\n          <tr>\n            <td class="modal__item center">Popularity</td>\n            <td class="popularity center">').concat(e.popularity.toFixed(1),'</td>\n          </tr>\n          <tr>\n            <td class="modal__item center">Original Title</td>\n            <td class="original center">').concat(e.original_title,'</td>\n          </tr>\n          <tr>\n            <td class="modal__item">Genre</td>\n            <td class="genre">').concat(t,'</td>\n          </tr>\n        </tbody>\n      </table>\n      <p class="modal__about">About</p>\n      <p class="modal__description">').concat(e.overview,'</p>\n      <div class="modal__boxBtn">\n        <button class="modal__btn" type="button" data-delete>delete</button>\n      </div>\n    </div>')}var d=o("kvuk2"),s=o("8irT4"),u=document.querySelector("[data-library]");function v(e,t){return m.apply(this,arguments)}function m(){return(m=e(r)(e(i).mark((function t(n,a){var o,r,v,m,p,f;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=function(){o.backdrop.classList.add("is-hidden"),r+=1},f=function(){if("watched"===a){var e=s.default.load("watched").filter((function(e){return v.id!==e.id}));s.default.save("watched",e),u.innerHTML=c(e)}if("queue"===a){var t=s.default.load("queue").filter((function(e){return v.id!==e.id}));s.default.save("queue",t),u.innerHTML=c(t)}p()},n){e.next=4;break}return e.abrupt("return");case 4:return o={closeModalBtn:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]"),modal:document.querySelector(".modal")},r=0,e.prev=6,e.next=9,(0,d.moviePageApi)(n);case 9:v=e.sent,console.log(v),o.backdrop.classList.remove("is-hidden"),o.modal.innerHTML=l(v),m=document.querySelector("[data-delete]"),o.closeModalBtn.addEventListener("click",p),document.addEventListener("keydown",(function(e){"Escape"===e.code&&0===r&&(p(),console.log("Escape"))})),m.addEventListener("click",f),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(6),console.log(e.t0);case 24:case"end":return e.stop()}}),t,null,[[6,21]])})))).apply(this,arguments)}s=o("8irT4");var p,f=document.querySelector("[data-watched]"),g=document.querySelector("[data-queue]"),_=document.querySelector("[data-library]"),b=0;function h(){p="watched",f.classList.add("activeBtn"),g.classList.remove("activeBtn");var e=s.default.load("watched")||[];if(console.log("onWatched"),0===e.length)return _.innerHTML="",void f.removeEventListener("click",h);_.innerHTML=c(e)}function y(){p="queue",g.classList.add("activeBtn"),f.classList.remove("activeBtn");var e=s.default.load("queue")||[];if(console.log("onQueue"),0===e.length)return _.innerHTML="",void g.removeEventListener("click",y);_.innerHTML=c(e)}0===b&&(b+=1,h()),f.addEventListener("click",(function(){0===b&&(b+=1,h())})),g.addEventListener("click",(function(){0!==b&&(b=0,y())})),_.addEventListener("click",(function(e){return v(e.target.id,p)}))}();
//# sourceMappingURL=library.58e3f66f.js.map
