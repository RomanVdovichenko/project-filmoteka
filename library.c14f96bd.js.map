{"mappings":"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","sources":["src/js/markup-lib.js","src/js/markup-modal-lib.js","src/js/modal-lib.js","src/library.js"],"sourcesContent":["export function markupLib(arr) {\n  const markup = arr.map(item => {\n    let genre = '';\n    for (let i = 0; i < item.genres.length; i++) {\n      if (i < item.genres.length -1 ) {\n        genre += item.genres[i].name + ',' + ' ';\n      }\n      else {\n        genre += item.genres[i].name;\n      }\n    }\n    return (\n      `<li class=\"movie\">\n          <div class=\"movie__box\">\n            <img class=\"lazyload movie__img\" id='${item.id}'\n              src=\"./images/Rectangle.png\"\n              data-src=\"https://image.tmdb.org/t/p/w500${item.img}\"\n              alt=\"${item.title}\"\n            />\n          </div>\n          <div class=\"movie__desc\">\n            <h3 class=\"movie__title\">${item.title}</h3>\n            <p class=\"movie__genre\">${genre} | ${item.date.slice(0, 4)}\n            <span class=\"movie__vote\">${item.vote.toFixed(1)}</span></p>\n          </div>\n        </li>`)}).join('');\n  return markup\n}\n","\nexport function markupModalLib(obj) {\n    let genre = '';\n    for (let i = 0; i < obj.genres.length; i++) {\n        if (i < obj.genres.length -1 ) {\n            genre += obj.genres[i].name + ',' + ' ';\n        }\n        else {\n            genre += obj.genres[i].name;\n        }\n    }\n  const markup = `\n    <img class=\"modal__img\" src=\"https://image.tmdb.org/t/p/w500${obj.poster_path}\" alt=\"${obj.title}\" />\n    <div class=\"modal__box\">\n      <p class=\"modal__title\">${obj.title}</p>\n      <table class=\"modal__info\">\n        <tbody>\n          <tr>\n            <td class=\"modal__item one\">Vote / Votes</td>\n            <td class=\"votes one\"><span class=\"vote\">${obj.vote_average.toFixed(1)}</span> / ${obj.vote_count}</td>\n          </tr>\n          <tr>\n            <td class=\"modal__item center\">Popularity</td>\n            <td class=\"popularity center\">${obj.popularity.toFixed(1)}</td>\n          </tr>\n          <tr>\n            <td class=\"modal__item center\">Original Title</td>\n            <td class=\"original center\">${obj.original_title}</td>\n          </tr>\n          <tr>\n            <td class=\"modal__item\">Genre</td>\n            <td class=\"genre\">${genre}</td>\n          </tr>\n        </tbody>\n      </table>\n      <p class=\"modal__about\">About</p>\n      <p class=\"modal__description\">${obj.overview}</p>\n      <div class=\"modal__boxBtn\">\n        <button class=\"modal__btn\" type=\"button\" data-delete>delete</button>\n      </div>\n    </div>`;\n    return markup\n };","\nimport { markupLib } from \"./markup-lib\";\nimport { markupModalLib } from \"./markup-modal-lib\";\nimport { moviePageApi } from \"./search-query\";\nimport store from \"./store\";\n\nconst galleryLib = document.querySelector('[data-library]');\n\nexport async function modalLib(id, c) {\n    if (!id) return;\n    const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    backdrop: document.querySelector('[data-modal]'),\n    modal: document.querySelector('.modal'),\n    };\n\n    let count = 0;\n    \n    try {\n        const moviePage = await moviePageApi(id);\n        refs.backdrop.classList.remove('is-hidden');\n        refs.modal.innerHTML = markupModalLib(moviePage);\n        const deleteBtn = document.querySelector('[data-delete]');\n        refs.closeModalBtn.addEventListener('click', closeModal);\n        document.addEventListener('keydown', evt => {\n                if (evt.code === 'Escape' && count === 0) {\n                    closeModal();    \n                    console.log('Escape');\n                }\n            });\n        function closeModal() {\n            refs.backdrop.classList.add('is-hidden');\n            count += 1;\n        }\n        deleteBtn.addEventListener('click', onDelete);\n        function onDelete() {\n            if (c === 'watched') {\n                const watched = store.load('watched');\n                const watchedFilter = watched.filter(item => moviePage.id !== item.id);\n                store.save('watched', watchedFilter);\n                galleryLib.innerHTML = markupLib(watchedFilter);\n            }\n\n            if (c === 'queue') {\n                const queue = store.load('queue');\n                const queueFilter = queue.filter(item => moviePage.id !== item.id);\n                store.save('queue', queueFilter);\n                galleryLib.innerHTML = markupLib(queueFilter);\n            }\n            closeModal();\n        }\n    }\n    catch (err) {\n        console.log(err)\n    }\n };","import { markupLib } from \"./js/markup-lib\";\nimport { modalLib } from \"./js/modal-lib\";\nimport store from \"./js/store\";\n\nconst watchedBtn = document.querySelector('[data-watched]');\nconst queueBtn = document.querySelector('[data-queue]');\nconst gallery = document.querySelector('[data-library]');\nlet click;\nlet count = 0;\n\nif (count === 0) {\n    count += 1;\n    onWatched();\n}\n\n\nwatchedBtn.addEventListener('click', () => {\n    if (count === 0) {\n        count += 1;\n        onWatched();\n    }\n});\nqueueBtn.addEventListener('click', () => {\n    if (count !== 0) {\n        count = 0;\n        onQueue();\n    }\n});\n\nfunction onWatched() {\n    click = 'watched';\n    watchedBtn.classList.add('activeBtn');\n    queueBtn.classList.remove('activeBtn');\n    const watchedList = store.load('watched') || [];\n    if (watchedList.length === 0) {\n        gallery.innerHTML = '';\n        watchedBtn.removeEventListener('click', onWatched);\n        return\n    } \n    gallery.innerHTML = markupLib(watchedList);\n };\n\nfunction onQueue() {\n    click = 'queue';\n    queueBtn.classList.add('activeBtn');\n    watchedBtn.classList.remove('activeBtn');\n    const queueList = store.load('queue') || [];\n    if (queueList.length === 0) {\n        gallery.innerHTML = '';\n        queueBtn.removeEventListener('click', onQueue);\n        return\n    } \n    gallery.innerHTML = markupLib(queueList);\n};\n \ngallery.addEventListener('click', (evt) => modalLib(evt.target.id, click));"],"names":["$661ea8cb468ec3cf$export$22bfa3024248c136","arr","map","item","genre","i","genres","length","name","id","img","title","date","slice","vote","toFixed","join","$074abf3a2638d3b0$export$4a9dde1eef44d90a","obj","poster_path","vote_average","vote_count","popularity","original_title","overview","$14bf1e4b50bc91ea$var$galleryLib","document","querySelector","async","$14bf1e4b50bc91ea$export$47349055345c4a22","c","refs","closeModalBtn","backdrop","modal","count","moviePage","$caWkO","moviePageApi","classList","remove","innerHTML","deleteBtn","closeModal","add","addEventListener","evt","code","console","log","watchedFilter","$5sIPK","default","load","filter","save","queueFilter","err","$ce3726a01b8ab25a$var$watchedBtn","$ce3726a01b8ab25a$var$queueBtn","$ce3726a01b8ab25a$var$gallery","$ce3726a01b8ab25a$var$click","$ce3726a01b8ab25a$var$count","$ce3726a01b8ab25a$var$onWatched","watchedList","removeEventListener","$ce3726a01b8ab25a$var$onQueue","queueList","target"],"version":3,"file":"library.c14f96bd.js.map"}