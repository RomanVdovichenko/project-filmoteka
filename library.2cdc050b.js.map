{"mappings":"kPAAO,SAASA,EAAUC,GAwBxB,OAvBeA,EAAIC,KAAI,SAAAC,GAErB,IADA,IAAIC,EAAQ,GACHC,EAAI,EAAGA,EAAIF,EAAKG,OAAOC,OAAQF,IAClCA,EAAIF,EAAKG,OAAOC,OAAQ,EAC1BH,GAASD,EAAKG,OAAOD,GAAGG,KAAfL,KAGTC,GAASD,EAAKG,OAAOD,GAAGG,KAG5B,MACE,oGAG8CC,OADVN,EAAKO,GAAG,0DAE7BD,OAD+BN,EAAKQ,IAAI,0BAKtBF,OAJlBN,EAAKS,MAAM,mHAKMH,OADCN,EAAKS,MAAM,+CACDH,OAAXL,EAAM,OAA0BK,OAArBN,EAAKU,KAAKC,MAAM,EAAE,GAAG,wC,IAEpDC,KAAK,G,gTCtBvB,IAAAC,EAAAC,EAAA,S,aCAO,SAASC,EAAeC,GAE3B,IADA,IAAIf,EAAQ,GACHC,EAAI,EAAGA,EAAIc,EAAIb,OAAOC,OAAQF,IAC/BA,EAAIc,EAAIb,OAAOC,OAAQ,EACvBH,GAASe,EAAIb,OAAOD,GAAGG,KAAdW,KAGTf,GAASe,EAAIb,OAAOD,GAAGG,KAiC/B,MA9Ba,qEAC0EC,OAAzBU,EAAIC,YAAY,WAElDX,OAF2DU,EAAIP,MAAM,sEAO9CH,OALvBU,EAAIP,MAAM,8LAK0CH,OAA7BU,EAAIE,aAAa,cAI5BZ,OAJwCU,EAAIG,WAAW,kJAQzDb,OAJEU,EAAII,WAAW,oJAQ3Bd,OAJUU,EAAIK,eAAe,0HASvBf,OALNL,EAAM,2IAKaK,OAAbU,EAAIM,SAAS,kJ,+BD9B7CC,EAAaC,SAASC,cAAc,Y,SAEpBC,EAASnB,EAAIoB,G,OAAbC,EAAQC,MAAAC,KAAAC,U,UAARH,I,OAAAA,EAAfI,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAC,EAAwB5B,EAAIoB,G,IACzBS,EAOIC,EAIAC,EAEGC,EAIAC,E,yEAJTD,EAAA,WACIH,EAAKK,SAASC,UAAUC,IAAI,Y,EAGhCH,EAAA,WACI,GAAU,IAANb,EAAS,CACT,IACMiB,EADUC,EAAAC,QAAMC,KAAK,WACGC,QAAO,SAAAhD,G,OAAQqC,EAAU9B,KAAOP,EAAKO,E,IACnEsC,EAAAC,QAAMG,KAAK,UAAWL,GACtBrB,EAAW2B,UAAYrD,EAAU+C,E,CAGrC,GAAU,IAANjB,EAAS,CACT,IACMwB,EADQN,EAAAC,QAAMC,KAAK,SACCC,QAAO,SAAAhD,G,OAAQqC,EAAU9B,KAAOP,EAAKO,E,IAC/DsC,EAAAC,QAAMG,KAAK,QAASE,GACpB5B,EAAW2B,UAAYrD,EAAUsD,E,CAErCZ,G,EA/BFH,EAAO,CACbgB,cAAe5B,SAASC,cAAc,sBACtCgB,SAAUjB,SAASC,cAAc,gBACjC4B,MAAO7B,SAASC,cAAc,W,mBAIF,EAAA6B,EAAAC,cAAahD,G,OAA/B8B,EAASmB,EAAAC,KACfC,QAAQC,IAAItB,GACZD,EAAKK,SAASC,UAAUkB,OAAO,aAC/BxB,EAAKiB,MAAMH,UAAYnC,EAAesB,GAChCC,EAAYd,SAASC,cAAc,iBACzCW,EAAKgB,cAAcS,iBAAiB,QAAStB,GAI7CD,EAAUuB,iBAAiB,QAASrB,G,kDAmBpCkB,QAAQC,IAAGH,EAAAM,I,2DApCWjC,MAAAC,KAAAC,U,kBED1BgC,EAHEC,EAAaxC,SAASC,cAAc,kBACpCwC,EAAWzC,SAASC,cAAc,gBAClCyC,EAAU1C,SAASC,cAAc,YAIvCuC,EAAWH,iBAAiB,SAG5B,SAASM,IACLJ,EAAI,EACJ,IAAMK,EAAcvB,EAAAC,QAAMC,KAAK,YAAc,GAE7C,GADAW,QAAQC,IAAI,SACe,IAAvBS,EAAYhE,OAGZ,OAFA8D,EAAQhB,UAAY,QACpBc,EAAWK,oBAAoB,QAASF,GAG5CD,EAAQhB,UAAYrD,EAAUuE,E,IAXlCH,EAASJ,iBAAiB,SAc1B,SAASS,IACLP,EAAI,EACJ,IAAMQ,EAAY1B,EAAAC,QAAMC,KAAK,UAAY,GAEzC,GADAW,QAAQC,IAAI,WACa,IAArBY,EAAUnE,OAGV,OAFA8D,EAAQhB,UAAY,QACpBe,EAASI,oBAAoB,QAASC,GAG1CJ,EAAQhB,UAAYrD,EAAU0E,E,IAGlCL,EAAQL,iBAAiB,SAAS,SAACW,G,OAAQ9C,EAAS8C,EAAIC,OAAOlE,GAAIwD,E","sources":["src/js/markup-lib.js","src/js/modal-lib.js","src/js/markup-modal-lib.js","src/library.js"],"sourcesContent":["export function markupLib(arr) {\n  const markup = arr.map(item => {\n    let genre = '';\n    for (let i = 0; i < item.genres.length; i++) {\n      if (i < item.genres.length -1 ) {\n        genre += item.genres[i].name + ',' + ' ';\n      }\n      else {\n        genre += item.genres[i].name;\n      }\n    }\n    return (\n      `<li class=\"movie\">\n          <div class=\"movie__box\">\n            <img class=\"movie__img\" id='${item.id}'\n              src=\"https://image.tmdb.org/t/p/w500${item.img}\"\n              alt=\"${item.title}\"\n            />\n          </div>\n          <div class=\"movie__desc\">\n            <h3 class=\"movie__title\">${item.title}</h3>\n            <p class=\"movie__genre\">${genre} | ${item.date.slice(0,4)}</p>\n          </div>\n        </li>`)}).join('');\n  return markup\n}\n","\nimport { markupLib } from \"./markup-lib\";\nimport { markupModalLib } from \"./markup-modal-lib\";\nimport { moviePageApi } from \"./search-query\";\nimport store from \"./store\";\n\nconst galleryLib = document.querySelector('#library');\n\nexport async function modalLib(id, c) {\n    const refs = {\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    backdrop: document.querySelector('[data-modal]'),\n    modal: document.querySelector('.modal'),\n    };\n    \n    try {\n        const moviePage = await moviePageApi(id);\n        console.log(moviePage);\n        refs.backdrop.classList.remove('is-hidden');\n        refs.modal.innerHTML = markupModalLib(moviePage);\n        const deleteBtn = document.querySelector('[data-delete]');\n        refs.closeModalBtn.addEventListener('click', closeModal);\n        function closeModal() {\n            refs.backdrop.classList.add('is-hidden');\n        }\n        deleteBtn.addEventListener('click', onDelete);\n        function onDelete() {\n            if (c === 0) {\n                const watched = store.load('watched');\n                const watchedFilter = watched.filter(item => moviePage.id !== item.id);\n                store.save('watched', watchedFilter);\n                galleryLib.innerHTML = markupLib(watchedFilter);\n            }\n\n            if (c === 1) {\n                const queue = store.load('queue');\n                const queueFilter = queue.filter(item => moviePage.id !== item.id);\n                store.save('queue', queueFilter);\n                galleryLib.innerHTML = markupLib(queueFilter);\n            }\n            closeModal();\n        }\n    }\n    catch (err) {\n        console.log(err)\n    }\n };","\nexport function markupModalLib(obj) {\n    let genre = '';\n    for (let i = 0; i < obj.genres.length; i++) {\n        if (i < obj.genres.length -1 ) {\n            genre += obj.genres[i].name + ',' + ' ';\n        }\n        else {\n            genre += obj.genres[i].name;\n        }\n    }\n  const markup = `\n    <img class=\"modal__img\" src=\"https://image.tmdb.org/t/p/w500${obj.poster_path}\" alt=\"${obj.title}\" />\n    <div class=\"modal__box\">\n      <p class=\"modal__title\">${obj.title}</p>\n      <table class=\"modal__info\">\n        <tbody>\n          <tr>\n            <td class=\"modal__item one\">Vote / Votes</td>\n            <td class=\"votes one\"><span class=\"vote\">${obj.vote_average}</span> / ${obj.vote_count}</td>\n          </tr>\n          <tr>\n            <td class=\"modal__item center\">Popularity</td>\n            <td class=\"popularity center\">${obj.popularity}</td>\n          </tr>\n          <tr>\n            <td class=\"modal__item center\">Original Title</td>\n            <td class=\"original center\">${obj.original_title}</td>\n          </tr>\n          <tr>\n            <td class=\"modal__item\">Genre</td>\n            <td class=\"genre\">${genre}</td>\n          </tr>\n        </tbody>\n      </table>\n      <p class=\"modal__about\">About</p>\n      <p class=\"modal__description\">${obj.overview}</p>\n      <div class=\"modal__boxBtn\">\n        <button class=\"modal__btn\" type=\"button\" data-delete>delete</button>\n      </div>\n    </div>`;\n    return markup\n };","import { markupLib } from \"./js/markup-lib\";\nimport { modalLib } from \"./js/modal-lib\";\nimport store from \"./js/store\";\n\nconst watchedBtn = document.querySelector('[data-watched]');\nconst queueBtn = document.querySelector('[data-queue]');\nconst gallery = document.querySelector('#library');\nlet c;\n\n\nwatchedBtn.addEventListener('click', onWatched);\nqueueBtn.addEventListener('click', onQueue);\n\nfunction onWatched() {\n    c = 0;\n    const watchedList = store.load('watched') || [];\n    console.log('hello');\n    if (watchedList.length === 0) {\n        gallery.innerHTML = '';\n        watchedBtn.removeEventListener('click', onWatched);\n        return\n    } \n    gallery.innerHTML = markupLib(watchedList);\n };\n\nfunction onQueue() {\n    c = 1;\n    const queueList = store.load('queue') || [];\n    console.log('goodbay');\n    if (queueList.length === 0) {\n        gallery.innerHTML = '';\n        queueBtn.removeEventListener('click', onQueue);\n        return\n    } \n    gallery.innerHTML = markupLib(queueList);\n};\n \ngallery.addEventListener('click', (evt) => modalLib(evt.target.id, c));"],"names":["$094a93adcbebbab0$export$22bfa3024248c136","arr","map","item","genre","i","genres","length","name","concat","id","img","title","date","slice","join","$bpxeT","parcelRequire","$6920de889eb54d65$export$4a9dde1eef44d90a","obj","poster_path","vote_average","vote_count","popularity","original_title","overview","$f711492705a4a950$var$galleryLib","document","querySelector","$f711492705a4a950$export$47349055345c4a22","c","$f711492705a4a950$var$_modalLib","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","refs","moviePage","deleteBtn","closeModal","onDelete","backdrop","classList","add","watchedFilter","$8irT4","default","load","filter","save","innerHTML","queueFilter","closeModalBtn","modal","$kvuk2","moviePageApi","_ctx","sent","console","log","remove","addEventListener","t0","$cecbdd76f2d3d4bd$var$c","$cecbdd76f2d3d4bd$var$watchedBtn","$cecbdd76f2d3d4bd$var$queueBtn","$cecbdd76f2d3d4bd$var$gallery","$cecbdd76f2d3d4bd$var$onWatched","watchedList","removeEventListener","$cecbdd76f2d3d4bd$var$onQueue","queueList","evt","target"],"version":3,"file":"library.2cdc050b.js.map"}